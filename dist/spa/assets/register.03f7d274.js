import{k as C,c as D,h as w,l as S,g as $,d as B,r as o,_ as I,m as d,n as f,f as j,p as O,q as v,t as m,F as g,u as y,v as h,x as b,y as k,z as F,A as q,Q as P,B as N,C as T,j as x}from"./index.d088fd42.js";import{u as z,a as Q}from"./use-dark.3f7005b2.js";const E=["horizontal","vertical","cell","none"];var A=C({name:"QMarkupTable",props:{...z,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,wrapCells:Boolean,separator:{type:String,default:"horizontal",validator:e=>E.includes(e)}},setup(e,{slots:r}){const t=$(),l=Q(e,t.proxy.$q),a=D(()=>`q-markup-table q-table__container q-table__card q-table--${e.separator}-separator`+(l.value===!0?" q-table--dark q-table__card--dark q-dark":"")+(e.dense===!0?" q-table--dense":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")+(e.square===!0?" q-table--square":"")+(e.wrapCells===!1?" q-table--no-wrap":""));return()=>w("div",{class:a.value},[w("table",{class:"q-table"},S(r.default))])}});const H=B({name:"QHierarchy",props:["data","columns","separator","dense","dark","flat","bordered","square","classes","defaultExpandAll","filter","expand_on_row_click","footer_text","footer_class"],setup(){return{leftDrawerOpen:o(!1),isExpanded:o(!0),selectedRowID:o({}),itemId:o(null),temp_data:o([]),temp_index:o(1),first_call:o(!1)}},watch:{selectedIDRow:function(e){this.selectedRowID!=null&&this.$set(this.selectedRowID,"_index",e)}},methods:{recursive(e,r,t,l,a,i){let n=this;e.forEach(function(s){if(s.children&&s.children.length!=0)s.level=t,s.leaf=!1,s.sortDirection="none",s.sorted=o(!1),s._index=n.temp_index,n.temp_index=n.temp_index+1,i&&(s.expend=!0),r.push(s),s._index==l&&(s.expend=a),s.expend==!0&&n.recursive(s.children,r,s.level+1,l,a,i);else return s.level=t,s.leaf=o(!0),s.sortDirection="none",s.sorted=o(!1),s._index=n.temp_index,n.temp_index=n.temp_index+1,r.push(s),!1})},iconName(e){return e.expend==!0?"remove":e.children&&e.children.length>0?"add":"done"},toggle(e){let r=this;r.itemId=e._index,e.leaf=o(!1),e.leaf==!1&&e.expend==null&&e.children!=null&&e.children.length!=0&&r.recursive(e.children,[],e.level+1,e._index,e.expend,!1),e.expend==!0&&e.children!=null&&(e.children.forEach(function(t){t.expend=void 0,r.setUndefined(t)}),e.expend=o(void 0),e.leaf=o(!1),r.itemId=null)},setPadding(e){return`padding-left: ${e.level*30}px;`},setUndefined(e){let r=this;e.hasOwnProperty("children")&&e.children&&e.children.forEach(function(t){t.expend=o(void 0),r.setUndefined(t)})},sortBy(e){e.sortDirection==="asc"?(this.sort_recursive(this.data,e,!0),e.sortDirection="desc",e.arrow_downward="arrow_downward"):(this.sort_recursive(this.data,e,!1),e.sortDirection="asc"),e.sorted=!0,this.$emit("sort_column",e),this.resetSorting(e)},sort_recursive(e,r,t){e.sort(this.sort_by(r,t));for(let l=0;l<e.length;l++)e[l].hasOwnProperty("children")&&this.sort_recursive(e[l].children,r,t)},sort_by(e,r){let t=r?-1:1;if(e.sortingType==="custom"&&typeof e.sortingFunc=="function")return function(a,i){return e.sortingFunc(a,i)*t};let l=function(a){return a.hasOwnProperty(e.field)?a[e.field]===null?"":a[e.field].toLowerCase():""};switch(e.sortingType){case"number":l=function(a){return parseFloat(a[e.field])};break;case"date":l=function(a){return new Date(a[e.field])};break}return function(a,i){return a=l(a),i=l(i),t*((a>i)-(i>a))}},resetSorting(e){let r=this.columns.length;for(let t=0;t<r;t++){let l=this.columns[t];l.field!=e.field&&(l.sorted=o(!1),l.sortDirection="none")}},filter_data(e,r,t,l,a){let i=[],n=new Set;const s=u=>!u.children||u.children.length===0?!1:u.children.some(c=>this.include(c,r,t,l)||s(c));for(let u=0;u<e.length;u++){let c=e[u];if((this.include(c,r,t,l)||s(c))&&(n.has(c)||(i.push(c),n.add(c)),a)){let p=c;for(;p;)p.expend=!0,p=p.parent}}return i},include(e,r,t,l){let a=!1,i=!1;i=!0,this.checkItem(e,r,t)&&(a=!0);let n=l.length;for(let s=0;s<n;s++){let u=l[s];u.filterable&&(i=!0,this.checkItem(e,r,u)&&(a=!0))}return i?a:!0},checkItem(e,r,t){if(t.sortingType==="number"){if(e[t.field]!=null&&parseFloat(e[t.field])===parseFloat(r))return!0}else if(e[t.field]!=null&&e[t.field].toLowerCase().indexOf(r.toLowerCase())!==-1)return!0}},computed:{arrayTreeObj(){let e=this,r=[];return this.temp_data=[],e.temp_index=1,e.recursive(e.data,r,0,e.itemId,e.isExpanded,e.first_call),e.first_call=o(!1),this.filter&&this.filter.length>=3?this.filter_data(r,this.filter,!0,this.columns):r},hasDefaultSlot(){return this.$slots.hasOwnProperty("body")},hasFooterSlot(){return this.$slots.hasOwnProperty("footer")},hasHeaderSlot(){return this.$slots.hasOwnProperty("header")}},created(){this.defaultExpandAll&&(this.first_call=o(!0))}}),V={key:0},M=["onClick"],L={key:1},R=["onClick"],U={class:"q-ml-sm"},G={key:2},J={key:3},K=["colspan"];function W(e,r,t,l,a,i){return d(),f("span",null,[j(A,{separator:e.separator,dense:e.dense,dark:e.dark,flat:e.flat,bordered:e.bordered,square:e.square,class:v(e.classes)},{default:O(()=>[m("thead",null,[e.hasHeaderSlot?h("",!0):(d(),f("tr",V,[(d(!0),f(g,null,y(e.columns,n=>(d(),f("th",{onClick:s=>n.sortable?e.sortBy(n):null,class:v("text-"+n.align)},[F(k(n.label)+" ",1),n.sorted?(d(),q(P,{key:0,name:n.sortDirection=="asc"?"arrow_upward":"arrow_downward"},null,8,["name"])):h("",!0)],10,M))),256))])),e.hasHeaderSlot?(d(),f("tr",L,[b(e.$slots,"header",{columns:e.columns,sortBy:e.sortBy})])):h("",!0)]),m("tbody",null,[e.hasDefaultSlot?(d(!0),f(g,{key:0},y(e.arrayTreeObj,(n,s)=>(d(),f("tr",{key:s},[b(e.$slots,"body",{item:n,toggle:e.toggle,setPadding:e.setPadding,iconName:e.iconName})]))),128)):h("",!0),e.hasDefaultSlot?h("",!0):(d(!0),f(g,{key:1},y(e.arrayTreeObj,(n,s)=>(d(),f("tr",{key:s,onClick:u=>e.expand_on_row_click?e.toggle(n):null},[(d(!0),f(g,null,y(e.columns,(u,c)=>(d(),f("td",{"data-th":"Name",class:v("text-"+u.align)},[m("div",{style:N(c==0?e.setPadding(n):{"padding-left":"30px"}),class:v(e.iconName(n)!="done"?"q-pl-lg":"")},[e.iconName(n)!="done"&&c==0?(d(),q(T,{key:0,onClick:p=>c==0?e.toggle(n):{},icon:e.iconName(n),flat:"",dense:""},null,8,["onClick","icon"])):h("",!0),m("span",U,k(n[u.field]),1)],6)],2))),256))],8,R))),128)),e.hasFooterSlot?(d(),f("tr",G,[b(e.$slots,"footer")])):h("",!0),!e.hasFooterSlot&&e.footer_text?(d(),f("tr",J,[m("td",{colspan:e.columns.length,class:v(e.footer_class)},k(e.footer_text),11,K)])):h("",!0)])]),_:3},8,["separator","dense","dark","flat","bordered","square","class"])])}var _=I(H,[["render",W]]);const X="quasar-ui-qhierarchy",Y="1.0.19",Z="pratikpatelpp802@gmail.com",ee="QHierarchy",re="MIT",te="dist/index.esm.js",se="dist/index.common.js",ne={dev:"cd dev && yarn dev && cd ..","dev:umd":"yarn build && node build/script.open-umd.js","dev:ssr":"cd dev && yarn 'dev:ssr' && cd ..","dev:ios":"cd dev && yarn 'dev:ios' && cd ..","dev:android":"cd dev && yarn 'dev:android' && cd ..","dev:electron":"cd dev && yarn 'dev:electron' && cd ..",build:"node build/index.js","build:js":"node build/script.javascript.js"},ae="https://next-quasar-qhierarchy.netlify.app/",le={type:"git",url:"git+https://github.com/pratik227/quasar-qhierarchy.git"},ie={type:"github",url:"https://github.com/sponsors/pratik227"},oe="",de={"@rollup/plugin-buble":"^0.21.3","@rollup/plugin-json":"^4.0.0","@rollup/plugin-node-resolve":"^11.2.1","@rollup/plugin-replace":"^2.4.2",chalk:"^4.1.0","fs-extra":"^8.1.0",open:"^7.3.0",quasar:"^2.0.0-beta.12",rimraf:"^3.0.0",rollup:"^2.45.0","uglify-js":"^3.13.3",zlib:"^1.0.5"},ue=["last 4 Chrome versions","last 4 Firefox versions","last 2 Edge versions","last 4 Safari versions","last 4 Android versions","last 4 ChromeAndroid versions","last 4 FirefoxAndroid versions","last 4 iOS versions"];var ce={name:X,version:Y,author:Z,description:ee,license:re,module:te,main:se,scripts:ne,homepage:ae,repository:le,funding:ie,bugs:oe,devDependencies:de,browserslist:ue};const{version:fe}=ce;function he(e){e.component(_.name,_)}var pe=Object.freeze(Object.defineProperty({__proto__:null,version:fe,QHierarchy:_,install:he},Symbol.toStringTag,{value:"Module"})),ge=x(({app:e})=>{e.use(pe)});export{ge as default};
